## HTTP/1.1

特性

- 持久连接。
  - 请求可复用 TCP 连接
  - Content-Length 请求截断
- 分块传输编码。不用等数据全部加载完再传输，多用于文件上传
- PUT, PATCH, HEAD, OPTIONS, DELETE

不足

- 队头阻塞。虽然 TCP 可复用连接，但所有的数据通信是按次序进行的



## HTTP/2

- 二进制协议。二进制解析更方便
- 多工。复用的 TCP 连接中，一个连接可以同时处理多个请求和响应，而不用一一对应
- 信息头压缩。gzip 压缩、服务端缓存请求头
- 服务端推送资源



## HTTP/3

HTTP over QUIC

QUIC 是 google 公司创建的基于 **UDP** 的网络协议

QUIC = UDP + TLS + HTTP/2



## HTTPS

HTTP + TLS，解决纯 HTTP 下的安全问题：

1. **窃听风险**：第三方可以获知通信内容
2. **篡改风险**：第三方可以修改通信内容
3. **冒充风险**：第三方可以冒充他人身份参与通信

针对上面三个问题，TLS 有以下三个特点

1. 加密传播
2. 校验机制
3. 身份证书

TLS 大致过程：

1. 客户端发送支持的 TLS 版本号等信息到服务端
2. 服务端把即将使用的加密方式和证书（包含非对称加密公钥）发送给客户端
3. 客户端生成对称加密用随机数并用证书中的公钥加密，发送给服务端
4. 服务端用私钥解出随机数，用其进行对称加密

后面的交流便都通过对称加密进行



## 参考资料

1. [《从HTTP/0.9到HTTP/2：一文读懂HTTP协议的历史演变和设计思路》](http://www.52im.net/thread-1709-1-1.html) ，2019 年，JackJiang

2. [《SSL/TLS协议运行机制的概述》](http://www.ruanyifeng.com/blog/2014/02/ssl_tls.html)